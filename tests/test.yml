---
- hosts: localhost
  become: true
  become_method: sudo
  vars:
    mailhog_smtp_port: 25
    gitlab_external_url: gitlab.example.com
    gitlab_registry_url: docker.example.com
    gitlab_activate_mattermost: true
    gitlab_mattermost_url: chat.example.com
    gitlab_additional_configs: # e.g. gitlab_rails['gitlab_email_from'] = 'gitlab@example.com'
    - namespace: gitlab_rails
      var: gitlab_email_from
      value: "'gitlab@example.com'"
    - namespace: gitlab_rails
      var: gitlab_email_reply_to
      value: "'gitlab@example.com'"
    - namespace: gitlab_rails
      var: smtp_enable
      value: "true"
    - namespace: gitlab_rails
      var: smtp_address
      value: "'localhost'"
    - namespace: gitlab_rails
      var: smtp_port
      value: 25
    - namespace: mattermost
      var: email_send_email_notifications
      value: "true"
    - namespace: mattermost
      var: email_smtp_username
      value: "'gitlab@example.com'"
    - namespace: mattermost
      var: email_smtp_server
      value: "'localhost'"
    - namespace: mattermost
      var: email_smtp_port
      value: 25
    - namespace: mattermost
      var: email_feedback_name
      value: "'GitLab Mattermost'"
    - namespace: mattermost
      var: email_feedback_email
      value: "'gitlab@example.com'"

  roles:
  - andrelohmann.mailhog
  - ansible-role-gitlab
...
